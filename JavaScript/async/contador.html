<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contador</title>
</head>

<body>
    <h1>Contador</h1>
    <ul>
        <li>Al ir escribiendo los segundos, se debe actualizar el botón con "Contar x segundos"</li>
        <li>Si el input está vacío el botón debe decir solo "Contar"</li>
        <li>Al presionar la tecla "Enter" se debe accionar el botón "Contar"</li>
        <li>Al momento de contar debe quedar enfocado el input con todo el valor seleccionado para que no se tenga que
            borrar</li>
        <li>Cuando se haga clic en el botón se debe agregar un nuevo elemento a la lista con los "segundos/cantidad"
        </li>
        <li>Cada cambio de segundo sebe reflejarse en el elemento de la lista y en la consola de javascript</li>
        <li>Al hacer clic en el contador, se debe eliminar</li>
    </ul>
    <label>
        Segundos:
        <input type="number">
    </label>
    <button>Contar</button>
    <ul id="SecondList"></ul>
    <script>

            const btn=document.querySelector('button');
            const inpt=document.querySelector('input');
            const list=document.getElementById('SecondList');
            inpt.focus();
            inpt.onkeydown=function(){
                if(inpt.value<=0){
                    btn.textContent="Contar";
                }else{
                btn.textContent="Contar "+inpt.value+" Segundos";
                }
                
            }
                    function count(miliseconds){
                        return new Promise(resolve => setTimeout(resolve,miliseconds));
                    }
            document.onkeypress = function()
            {
                var tecla;
                tecla = (document.all) ? event.keyCode : event.which;
                if(tecla == 13)
                    {btn.click();
                }
            }
           
            btn.onclick=function(){
                inpt.focus();
               
                 //TODO enfocar texto
                let listItem=document.createElement('li');
                listItem.onclick=function(){
                    list.removeChild(listItem);
                    clearInterval(interval1);
                }
                let counter=0;
                let Cantidad=0;
                 listItem.textContent= counter+"/"+inpt.value;
                 
                 
                 list.appendChild(listItem);
                 let i=0;   
                 const interval1=setInterval(run,1000);
                
         async function run(){
                    
                    if(counter===0){
                    Cantidad=inpt.value;
                    }
                    counter++;
                    listItem.textContent= counter+"/"+Cantidad;
                    console.log(counter+"/"+Cantidad);
                    count(Cantidad*1000).then(()=>{
                     clearInterval(interval1);
                        list.removeChild(listItem);})
                  
                    }
                }
             

                
               
            
            


           
            
    </script>
</body>

</html>     